(()=>{"use strict";var e,t,n,a,r={891:(e,t,n)=>{n.d(t,{C:()=>a,q:()=>r});const a=async e=>new Promise(((t,n)=>{chrome.storage.local.get(e,(a=>{void 0===a||void 0===a[e]?n(e):t(a[e])}))})).catch((e=>{console.log(`get local storage data failed for key = ${e}`)})),r=async(e,t)=>new Promise((()=>{chrome.storage.local.set({[e]:t}),resolve()})).catch((e=>console.log(e)))},597:(e,t,n)=>{n.a(e,(async(e,t)=>{try{var a=n(970),r=n(139);console.log("Hello PMCA!"),await(0,a.O1)(),document.addEventListener("click",r.L),t()}catch(e){t(e)}}),1)},139:(e,t,n)=>{n.d(t,{L:()=>x});var a=n(214);const r=[1440,2880,5760,10080,21600],o="text-green-s dark:text-dark-green-s flex flex-1 items-center gap-2 text-[16px] font-medium leading-6",s="success__3Ai7",l="text-green-s dark:text-dark-green-s flex flex-1 items-center gap-2 text-[16px] font-medium leading-6",i=e=>"Easy"===e?a.h.easyIntv:"Medium"===e?a.h.mediumIntv:a.h.hardIntv,c=e=>"console-submit-button"===e.getAttribute("data-e2e-locator"),d={operationName:"questionTitle",variables:{titleSlug:""}},m={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.122 Safari/537.36",Connection:"keep-alive","Content-Type":"application/json",Referer:""};var u=n(891);Object.freeze({MASTER:"mark as mastered",RESET:"reset progress",DELETE:"delete record"});var p=n(134);const f=async()=>{const e=await(0,u.C)(p.dw);return console.log(`current cnMode is ${e}`),void 0===e&&(await(0,u.q)(p.dw,!1),e=!1),e},y=async()=>{const e=await f()?p.Q$:p.y0;let t=await(0,u.C)(e);return void 0===t&&(t={}),t},w=async e=>{const t=await y();t[e.index]=e,await(async e=>{const t=await f()?p.Q$:p.y0;await(0,u.q)(t,e)})(t)};class g{constructor(e,t,n,a,r,o){this.index=e,this.name=t,this.level=n,this.url=a,this.submissionTime=r,this.proficiency=o}}const v=()=>{let e,t=10;const n=setInterval((async()=>{if(t<=0)return void clearInterval(n);if(e=document.getElementsByClassName(o)[0]||document.getElementsByClassName("whitespace-nowrap text-xl font-medium text-red-s dark:text-dark-red-s")[0]||document.getElementsByClassName("mr-1 flex-1 whitespace-nowrap text-xl font-medium text-red-s dark:text-dark-red-s")[0]||document.getElementsByClassName(s)[0]||document.getElementsByClassName("error__2Ft1")[0]||document.getElementsByClassName("error__10k9")[0]||document.getElementsByClassName(l)[0]||document.getElementsByClassName("whitespace-nowrap text-xl font-medium text-red-s dark:text-dark-red-s")[0]||document.getElementsByClassName("mr-1 flex-1 whitespace-nowrap text-xl font-medium text-red-s dark:text-dark-red-s")[0],void 0===e||0===e.length)return void t--;clearInterval(n);let a=(e=>e.className.includes(o)||e.className.includes(l)||e.className.includes(s))(e);const{problemIndex:c,problemName:u,problemLevel:p,problemUrl:f}=await(async()=>await(async()=>{let e=window.location.href;const t=e.match(/(com|cn)(\/|$)/);console.log(`current site is ${t[1]}`);const n=t?t[1]:"com",a=["/submissions/","/description/","/discussion/","/solutions/"];for(const t of a)if(e.includes(t)){e=e.substring(0,e.lastIndexOf(t)+1);break}const r=e.split("/").splice(-2)[0],o=await(async(e,t)=>{const n=`https://leetcode.${t}`;d.variables.titleSlug=e,d.query=`query questionTitle($titleSlug: String!) {\n        question(titleSlug: $titleSlug) {\n          questionFrontendId\n          ${"cn"===t?"translatedTitle":"title"}\n          difficulty\n        }\n      }`,m.Referer=`${n}/problems/${e}`;const a={method:"POST",headers:m,body:JSON.stringify(d),timeout:1e4},r=await fetch(`${n}/graphql`,a);return(await r.json()).data.question})(r,n);return{problemIndex:o.questionFrontendId,problemName:`${o.questionFrontendId}. ${"cn"===n?o.translatedTitle:o.title}`,problemLevel:o.difficulty,problemUrl:e}})())(),v=await y();if(v[c]){const e=v[c];(e=>!(e.proficiency>=r.length)&&(Date.now()-e.submissionTime)/6e4>=r[e.proficiency])(e)&&a&&await w((e=>{const t=i(e.problemLevel);let n;for(const a of t)if(a>e.proficiency){n=a;break}return e.proficiency=void 0!==n?n:r.length,e.submissionTime=Date.now(),e})(e))}else if(a){const e=new g(c,u,p,f,Date.now(),i(p)[0]);await w(e)}console.log("Submission successfully tracked!")}),1e3)},x=e=>{const t=e.target;[c(t),t.parentElement&&c(t.parentElement),t.parentElement&&t.parentElement.parentElement&&c(t.parentElement.parentElement)].reduce(((e,t)=>e||t))&&v()}},970:(e,t,n)=>{n.d(t,{O1:()=>s});var a=n(891),r=n(214),o=n(134);const s=async()=>{await(async()=>{const e=await(async()=>await(0,a.C)(o.FB))();void 0!==e&&Object.assign(r.h,e)})()}},214:(e,t,n)=>{n.d(t,{h:()=>a});const a={needReviewProblems:null,reviewScheduledProblems:null,completedProblems:null,toReviewPage:1,scheduledPage:1,completedPage:1,toReviewMaxPage:null,scheduledMaxPage:null,completedMaxPage:null,tooltipTriggerList:null,tooltipList:null,easyIntv:[1,3],mediumIntv:[1,3,4],hardIntv:[0,1,2,3,4]}},134:(e,t,n)=>{n.d(t,{FB:()=>s,Q$:()=>r,dw:()=>a,y0:()=>o});const a="cn_mode",r="cn_records",o="records",s="review_intervals"}},o={};function s(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return r[e](n,n.exports,s),n.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",a=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},s.a=(r,o,s)=>{var l;s&&((l=[]).d=-1);var i,c,d,m=new Set,u=r.exports,p=new Promise(((e,t)=>{d=t,c=e}));p[t]=u,p[e]=e=>(l&&e(l),m.forEach(e),p.catch((e=>{}))),r.exports=p,o((r=>{var o;i=(r=>r.map((r=>{if(null!==r&&"object"==typeof r){if(r[e])return r;if(r.then){var o=[];o.d=0,r.then((e=>{s[t]=e,a(o)}),(e=>{s[n]=e,a(o)}));var s={};return s[e]=e=>e(o),s}}var l={};return l[e]=e=>{},l[t]=r,l})))(r);var s=()=>i.map((e=>{if(e[n])throw e[n];return e[t]})),c=new Promise((t=>{(o=()=>t(s)).r=0;var n=e=>e!==l&&!m.has(e)&&(m.add(e),e&&!e.d&&(o.r++,e.push(o)));i.map((t=>t[e](n)))}));return o.r?c:s()}),(e=>(e?d(p[n]=e):c(u),a(l)))),l&&l.d<0&&(l.d=0)},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s(597)})();